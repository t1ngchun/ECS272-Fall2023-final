{
  "version": 3,
  "sources": ["../../d3-collection/src/map.js", "../../d3-collection/src/nest.js", "../../d3-collection/src/set.js", "../../d3-collection/src/keys.js", "../../d3-collection/src/values.js", "../../d3-collection/src/entries.js"],
  "sourcesContent": ["export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function(key) {\n    return (prefix + key) in this;\n  },\n  get: function(key) {\n    return this[prefix + key];\n  },\n  set: function(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function() {\n    for (var property in this) if (property[0] === prefix) delete this[property];\n  },\n  keys: function() {\n    var keys = [];\n    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n    return keys;\n  },\n  values: function() {\n    var values = [];\n    for (var property in this) if (property[0] === prefix) values.push(this[property]);\n    return values;\n  },\n  entries: function() {\n    var entries = [];\n    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n    return entries;\n  },\n  size: function() {\n    var size = 0;\n    for (var property in this) if (property[0] === prefix) ++size;\n    return size;\n  },\n  empty: function() {\n    for (var property in this) if (property[0] === prefix) return false;\n    return true;\n  },\n  each: function(f) {\n    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map;\n\n  // Copy constructor.\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n  // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n    var i = -1,\n        n = object.length,\n        o;\n\n    if (f == null) while (++i < n) map.set(i, object[i]);\n    else while (++i < n) map.set(f(o = object[i], i, object), o);\n  }\n\n  // Convert object to map.\n  else if (object) for (var key in object) map.set(key, object[key]);\n\n  return map;\n}\n\nexport default map;\n", "import map from \"./map\";\n\nexport default function() {\n  var keys = [],\n      sortKeys = [],\n      sortValues,\n      rollup,\n      nest;\n\n  function apply(array, depth, createResult, setResult) {\n    if (depth >= keys.length) {\n      if (sortValues != null) array.sort(sortValues);\n      return rollup != null ? rollup(array) : array;\n    }\n\n    var i = -1,\n        n = array.length,\n        key = keys[depth++],\n        keyValue,\n        value,\n        valuesByKey = map(),\n        values,\n        result = createResult();\n\n    while (++i < n) {\n      if (values = valuesByKey.get(keyValue = key(value = array[i]) + \"\")) {\n        values.push(value);\n      } else {\n        valuesByKey.set(keyValue, [value]);\n      }\n    }\n\n    valuesByKey.each(function(values, key) {\n      setResult(result, key, apply(values, depth, createResult, setResult));\n    });\n\n    return result;\n  }\n\n  function entries(map, depth) {\n    if (++depth > keys.length) return map;\n    var array, sortKey = sortKeys[depth - 1];\n    if (rollup != null && depth >= keys.length) array = map.entries();\n    else array = [], map.each(function(v, k) { array.push({key: k, values: entries(v, depth)}); });\n    return sortKey != null ? array.sort(function(a, b) { return sortKey(a.key, b.key); }) : array;\n  }\n\n  return nest = {\n    object: function(array) { return apply(array, 0, createObject, setObject); },\n    map: function(array) { return apply(array, 0, createMap, setMap); },\n    entries: function(array) { return entries(apply(array, 0, createMap, setMap), 0); },\n    key: function(d) { keys.push(d); return nest; },\n    sortKeys: function(order) { sortKeys[keys.length - 1] = order; return nest; },\n    sortValues: function(order) { sortValues = order; return nest; },\n    rollup: function(f) { rollup = f; return nest; }\n  };\n}\n\nfunction createObject() {\n  return {};\n}\n\nfunction setObject(object, key, value) {\n  object[key] = value;\n}\n\nfunction createMap() {\n  return map();\n}\n\nfunction setMap(map, key, value) {\n  map.set(key, value);\n}\n", "import {default as map, prefix} from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\n\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set;\n\n  // Copy constructor.\n  if (object instanceof Set) object.each(function(value) { set.add(value); });\n\n  // Otherwise, assume itâ€™s an array.\n  else if (object) {\n    var i = -1, n = object.length;\n    if (f == null) while (++i < n) set.add(object[i]);\n    else while (++i < n) set.add(f(object[i], i, object));\n  }\n\n  return set;\n}\n\nexport default set;\n", "export default function(map) {\n  var keys = [];\n  for (var key in map) keys.push(key);\n  return keys;\n}\n", "export default function(map) {\n  var values = [];\n  for (var key in map) values.push(map[key]);\n  return values;\n}\n", "export default function(map) {\n  var entries = [];\n  for (var key in map) entries.push({key: key, value: map[key]});\n  return entries;\n}\n"],
  "mappings": "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",
  "names": ["map", "key", "values", "key", "map", "set", "map", "map", "map"]
}
